# Default values for unified-dns-dhcp
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# Service-specific configurations
services:
  dns:
    enabled: true
  dhcp:
    enabled: true

# Network segments configuration
# Each segment represents an isolated network with its own DNS and DHCP services
segments:
  - name: "100"
    displayName: "example-network"
    ipv4:
      subnet: "192.168.100.0/24"
      gateway: "192.168.100.1"
      dns: "192.168.100.5"      # DNS server IP
      dhcp: "192.168.100.5"     # DHCP server IP (usually same as DNS)
      range:
        start: "192.168.100.50"
        end: "192.168.100.200"
    ipv6:
      subnet: "fd00:192:168:100::/64"
      dns: "fd00:192:168:100::5"
      dhcp: "fd00:192:168:100::5"
    network:
      # Network attachment definition (Multus)
      # Examples: "eth1", "vlan.100", "br-lan"
      attachment: "vlan.100"
    zone:
      forward: "example.local"
      reverseV4: "100.168.192.in-addr.arpa"
      reverseV6: "0.0.1.0.8.6.1.0.2.9.1.0.0.0.d.f.ip6.arpa"
    # Optional: Static DNS records
    staticRecords:
      - "gateway IN A 192.168.100.1"
      - "gateway IN AAAA fd00:192:168:100::1"
      - "dns IN A 192.168.100.5"
      - "dns IN AAAA fd00:192:168:100::5"
    # Optional: Static DHCP reservations
    staticLeases:
      - macAddress: "aa:bb:cc:dd:ee:ff"
        address: "192.168.100.10"
        hostname: "server.example.local"

# Global configuration
global:
  namespace: "dns-dhcp"

  # DNS resolver type: "unbound" or "knot-resolver"
  resolver:
    type: unbound

  # Upstream DNS servers (for recursive resolution)
  # Comment out to use root servers
  upstreamDNS:
  #  - "8.8.8.8"
  #  - "1.1.1.1"
  #  - "2001:4860:4860::8888"
  #  - "2001:4860:4860::8844"

  # Authoritative DNS service configuration (internal)
  authDNS:
    service: "127.0.0.1"  # Service name or IP
    port: 5353

  # Dynamic DNS (DDNS) configuration
  ddns:
    # Generate a TSIG key with: tsig-keygen -a hmac-sha256 ddns_key
    key: "CHANGE_ME_GENERATE_YOUR_OWN_KEY"
    keyName: "ddns_key"

  # Container images
  images:
    unbound: "crazymax/unbound:latest"
    knotAuth: "cznic/knot:latest"
    keaDhcp: "docker.cloudsmith.io/isc/docker/kea-dhcp4:latest"
    keaDdns: "docker.cloudsmith.io/isc/docker/kea-dhcp-ddns:latest"

  # Storage configuration
  storage:
    className: "local-path"  # Storage class for PVCs
    reclaimPolicy: "Retain"  # "Retain" or "Delete"

# Zone storage PVC configuration
zoneStorage:
  enabled: true
  size: "1Gi"
